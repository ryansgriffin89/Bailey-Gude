<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bailey‚Äôs Guide to Wellness</title>

<!-- PWA -->
<link rel="manifest" href="./manifest.webmanifest" />
<meta name="theme-color" content="#0b0b12" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Bailey‚Äôs Guide" />
<link rel="apple-touch-icon" href="./icon.svg" />

<style>
:root{
  --bg0:#07070c;
  --bg1:#0b0b12;
  --card:rgba(255,255,255,0.06);
  --stroke:rgba(255,255,255,0.14);
  --text:rgba(255,255,255,0.92);
  --muted:rgba(255,255,255,0.62);

  --pink:#ff3bd4;
  --cyan:#39f5ff;
  --lime:#a6ff4d;
  --purple:#8a5cff;
  --orange:#ff9f2e;

  --shadow:0 20px 60px rgba(0,0,0,0.45);
  --radius:26px;
  --font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

*{box-sizing:border-box;-webkit-font-smoothing:antialiased}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  background:
    radial-gradient(1200px 700px at 10% -10%, rgba(255,59,212,0.26), transparent 60%),
    radial-gradient(900px 600px at 90% 0%, rgba(57,245,255,0.22), transparent 55%),
    radial-gradient(900px 700px at 50% 110%, rgba(138,92,255,0.18), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1) 55%, #07070c);
  color:var(--text);
  line-height:1.45;
  padding-bottom:120px;
}

header{
  padding:34px 18px 22px;
  text-align:center;
  border-bottom-left-radius:34px;
  border-bottom-right-radius:34px;
  background:
    radial-gradient(800px 300px at 30% 0%, rgba(255,59,212,0.35), transparent 55%),
    radial-gradient(700px 320px at 70% 10%, rgba(57,245,255,0.28), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border-bottom:1px solid rgba(255,255,255,0.10);
  backdrop-filter:blur(14px);
}

h1{margin:0;font-weight:1000;letter-spacing:-1.2px;font-size:1.85rem}
.subtitle{
  margin-top:8px;
  font-size:0.82rem;
  font-weight:800;
  letter-spacing:2px;
  text-transform:uppercase;
  color:rgba(255,255,255,0.74);
}
.header-line{
  width:140px;height:4px;margin:14px auto 0;border-radius:999px;
  background:linear-gradient(90deg,var(--pink),var(--cyan),var(--lime));
  box-shadow:0 0 18px rgba(57,245,255,0.35);
}
.today-chip{
  display:inline-flex;align-items:center;gap:10px;margin-top:14px;padding:10px 14px;border-radius:999px;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter:blur(10px);
  box-shadow:0 10px 30px rgba(0,0,0,0.20);
  font-weight:900;font-size:0.86rem;
}
.today-chip .dot{
  width:10px;height:10px;border-radius:50%;
  background:linear-gradient(180deg,var(--pink),var(--cyan));
  box-shadow:0 0 0 4px rgba(255,255,255,0.10),0 0 20px rgba(255,59,212,0.25);
}
.cycle-sync-container{
  margin-top:16px;padding:6px;border-radius:999px;display:inline-flex;gap:6px;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.14);
  backdrop-filter:blur(10px);
}
.cycle-btn{
  border:none;cursor:pointer;padding:10px 14px;border-radius:999px;
  font-weight:950;font-size:0.78rem;color:rgba(255,255,255,0.80);
  background:transparent;
  transition:transform .14s ease, background .2s ease, color .2s ease;
}
.cycle-btn:active{transform:scale(0.98)}
.cycle-btn.active{
  color:#0b0b12;
  background:linear-gradient(90deg,var(--pink),var(--cyan));
  box-shadow:0 10px 24px rgba(0,0,0,0.25),0 0 26px rgba(57,245,255,0.25);
}

.container{max-width:640px;margin:-14px auto 40px;padding:0 14px}

.section-label{
  margin:34px 8px 14px;display:flex;justify-content:space-between;align-items:center;gap:10px;
  color:rgba(255,255,255,0.80);
  font-weight:1000;letter-spacing:2px;text-transform:uppercase;font-size:0.78rem;
}
.section-label span{display:inline-flex;align-items:center;gap:10px}
.section-label span::before{
  content:"";width:10px;height:10px;border-radius:50%;
  background:linear-gradient(180deg,var(--pink),var(--cyan));
  box-shadow:0 0 18px rgba(255,59,212,0.25);
}
.card{
  border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
  border:1px solid rgba(255,255,255,0.12);
  padding:22px;
  box-shadow:var(--shadow);
  backdrop-filter:blur(16px);
  margin-bottom:18px;
}
.dynamic-box{
  border-radius:20px;padding:14px 16px;margin-bottom:16px;
  background:rgba(57,245,255,0.08);
  border:1px solid rgba(57,245,255,0.22);
  box-shadow:0 18px 40px rgba(0,0,0,0.35);
  backdrop-filter:blur(14px);
  color:rgba(255,255,255,0.88);
}
.dynamic-box strong{color:#fff}

.checklist{display:grid;gap:10px;margin-top:14px}
.check-item{
  display:flex;gap:12px;align-items:flex-start;padding:14px;border-radius:18px;cursor:pointer;user-select:none;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.10);
  transition:transform .12s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease;
}
.check-item:hover{border-color:rgba(57,245,255,0.20)}
.check-item:active{transform:scale(0.99)}
.check-item .box{
  width:24px;height:24px;border-radius:9px;border:2px solid rgba(255,255,255,0.22);
  background:rgba(0,0,0,0.22);
  display:flex;align-items:center;justify-content:center;
  font-size:14px;line-height:1;flex-shrink:0;margin-top:2px;
}
.check-item .title{font-weight:1000}
.check-item .sub{font-size:0.86rem;color:var(--muted)}
.check-item.done{
  border-color:rgba(166,255,77,0.35);
  background:rgba(166,255,77,0.08);
  box-shadow:0 0 26px rgba(166,255,77,0.12);
}
.check-item.done .box{
  border-color:rgba(166,255,77,0.6);
  background:linear-gradient(180deg, rgba(166,255,77,0.95), rgba(57,245,255,0.85));
  color:#07110a;font-weight:1000;
}
.check-meta{
  margin-top:12px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px;
  font-size:0.82rem;color:rgba(255,255,255,0.70);font-weight:900;
}
.small-link{
  border:none;background:transparent;color:rgba(57,245,255,0.95);
  font-weight:1000;cursor:pointer;padding:0;
}
.small-link:active{transform:scale(0.98)}

.tracker-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;margin-top:14px}
.lb-bubble{
  width:100%;aspect-ratio:1;border-radius:999px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;user-select:none;font-weight:1000;font-size:0.75rem;
  color:rgba(255,255,255,0.55);
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.10);
  transition:transform .12s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease;
}
.lb-bubble:hover{border-color:rgba(255,59,212,0.20)}
.lb-bubble:active{transform:scale(0.98)}
.lb-bubble.checked{
  color:#09090f;
  background:linear-gradient(180deg, rgba(255,59,212,0.95), rgba(57,245,255,0.85));
  border-color:rgba(57,245,255,0.28);
  box-shadow:0 0 24px rgba(255,59,212,0.18);
  transform:translateY(-1px);
}
.tracker-footer{margin-top:12px;display:flex;justify-content:space-between;align-items:center;gap:10px}
.tracker-count{font-weight:900;font-size:0.82rem;color:rgba(255,255,255,0.70)}
.reset-btn{
  border:none;cursor:pointer;padding:10px 12px;border-radius:14px;font-weight:1000;
  color:rgba(255,255,255,0.80);
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
}
.reset-btn:active{transform:scale(0.98)}

.schedule-item{display:flex;gap:12px;align-items:flex-start;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.08)}
.schedule-item:last-child{border-bottom:none;padding-bottom:0}
.schedule-item:first-child{padding-top:0}
.time{
  min-width:70px;padding:8px 10px;border-radius:14px;text-align:center;
  font-variant-numeric:tabular-nums;font-weight:1000;font-size:0.86rem;
  color:rgba(255,255,255,0.88);
  background:rgba(0,0,0,0.22);
  border:1px solid rgba(255,255,255,0.10);
}
.activity{flex:1;display:flex;flex-direction:column;gap:4px}
.activity strong{font-weight:1000}
.activity span{color:var(--muted);font-size:0.86rem}
.tag{
  margin-top:6px;width:fit-content;display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;font-weight:1000;font-size:0.75rem;
  border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.05);
}
.tag.food{background:rgba(255,59,212,0.10);border-color:rgba(255,59,212,0.22)}
.tag.move{background:rgba(57,245,255,0.10);border-color:rgba(57,245,255,0.22)}

.workout-card{
  border-radius:24px;overflow:hidden;
  border:1px solid rgba(255,255,255,0.12);
  background:linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.03));
  box-shadow:var(--shadow);backdrop-filter:blur(16px);
  margin-bottom:18px;
}
.workout-header{
  padding:18px;display:flex;justify-content:space-between;align-items:center;gap:12px;
  background:
    radial-gradient(600px 180px at 20% 0%, rgba(255,59,212,0.18), transparent 55%),
    radial-gradient(600px 200px at 80% 0%, rgba(57,245,255,0.16), transparent 55%),
    rgba(255,255,255,0.03);
  border-bottom:1px solid rgba(255,255,255,0.10);
}
.workout-title{font-weight:1000;font-size:1.06rem;letter-spacing:-0.2px}
.workout-meta{font-size:0.82rem;color:rgba(255,255,255,0.62);font-weight:800;margin-top:4px}

.collapse-btn{
  border:none;cursor:pointer;padding:10px 12px;border-radius:14px;font-weight:1000;
  color:rgba(255,255,255,0.85);
  background:rgba(0,0,0,0.25);
  border:1px solid rgba(255,255,255,0.12);
  display:flex;align-items:center;gap:8px;flex-shrink:0;
}
.collapse-btn:active{transform:scale(0.98)}
.chev{display:inline-block;transition:transform .18s ease}
.workout-card.collapsed .chev{transform:rotate(-90deg)}
.workout-body{overflow:hidden;max-height:2000px;transition:max-height .25s ease}

.exercise-block{padding:18px;border-bottom:1px solid rgba(255,255,255,0.08)}
.exercise-block:last-child{border-bottom:none}
.ex-header{display:flex;justify-content:space-between;gap:10px;margin-bottom:10px}
.ex-name{font-weight:950;font-size:1rem}
.ex-reps{
  white-space:nowrap;font-weight:1000;font-size:0.78rem;padding:6px 10px;border-radius:999px;
  color:rgba(255,255,255,0.90);
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
}
.ex-details{display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.86rem;color:rgba(255,255,255,0.70);margin-bottom:10px}
.detail-box{border-radius:14px;padding:10px;background:rgba(0,0,0,0.20);border:1px solid rgba(255,255,255,0.10)}
.detail-label{
  display:block;font-size:0.7rem;font-weight:1000;letter-spacing:1.2px;text-transform:uppercase;
  color:rgba(255,255,255,0.58);margin-bottom:3px;
}
.cue-text{
  font-style:italic;color:rgba(255,255,255,0.70);
  border-left:3px solid rgba(255,59,212,0.55);
  padding-left:10px;margin-top:10px;
}
.action-btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
.btn-mini{
  text-decoration:none;display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:14px;
  font-weight:1000;font-size:0.78rem;color:rgba(255,255,255,0.88);
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.12);
}
.btn-mini:active{transform:scale(0.98)}

.workout-card.today{
  border-color:rgba(57,245,255,0.30);
  box-shadow:0 0 40px rgba(57,245,255,0.12), var(--shadow);
}
.today-badge{
  display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;
  font-size:0.72rem;font-weight:1000;margin-left:8px;
  background:linear-gradient(90deg, rgba(255,59,212,0.22), rgba(57,245,255,0.18));
  border:1px solid rgba(255,255,255,0.12);
}

/* ===== STACK (Collapsible + Taken toggle) ===== */
.stack-group{border-top:1px solid rgba(255,255,255,0.08);padding-top:14px;margin-top:14px}
.stack-group:first-child{border-top:none;padding-top:0;margin-top:0}

.stack-head{
  width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;
  border:none;cursor:pointer;padding:12px 10px;border-radius:18px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.10);
  color:rgba(255,255,255,0.90);
}
.stack-left{display:flex;align-items:center;gap:12px;text-align:left}
.stack-emoji{
  width:44px;height:44px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:1.35rem;
  background:rgba(0,0,0,0.22);
  border:1px solid rgba(255,255,255,0.12);
}
.stack-title{font-weight:1000;font-size:0.98rem;letter-spacing:-0.2px}
.stack-sub{font-weight:800;font-size:0.82rem;color:rgba(255,255,255,0.62);margin-top:2px}

.stack-right{display:flex;align-items:center;gap:10px;flex-shrink:0}
.stack-chev{transition:transform .18s ease;opacity:.85}
.stack-group.collapsed .stack-chev{transform:rotate(-90deg)}

.stack-toggle{display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none}
.stack-check{display:none}
.toggle-pill{
  padding:8px 10px;border-radius:999px;font-weight:1000;font-size:0.76rem;
  background:rgba(0,0,0,0.22);
  border:1px solid rgba(255,255,255,0.12);
  color:rgba(255,255,255,0.80);
}
.stack-check:checked + .toggle-pill{
  background:linear-gradient(90deg, rgba(166,255,77,0.95), rgba(57,245,255,0.85));
  color:#07110a;border-color:rgba(57,245,255,0.25);
}

.stack-body{padding:12px 6px 2px;overflow:hidden;max-height:2000px;transition:max-height .25s ease}
.stack-group.collapsed .stack-body{max-height:0px;padding:0 6px}

.stack-item{padding:12px 6px;border-bottom:1px solid rgba(255,255,255,0.08)}
.stack-item:last-child{border-bottom:none}
.stack-item h4{margin:0 0 6px 0;font-weight:1000}
.stack-benefit{color:rgba(255,255,255,0.72);font-size:0.88rem;font-weight:850}
.stack-notes{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}
.note{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;font-weight:950;font-size:0.74rem;
  background:rgba(57,245,255,0.10);border:1px solid rgba(57,245,255,0.20);
  color:rgba(255,255,255,0.86);
}

.confetti-btn-container{
  position:fixed;bottom:26px;left:0;right:0;display:flex;justify-content:center;z-index:100;pointer-events:none;
}
.confetti-btn{
  pointer-events:auto;cursor:pointer;border:none;border-radius:999px;padding:16px 22px;font-weight:1100;font-size:1.02rem;
  color:#07070c;background:linear-gradient(90deg,var(--pink),var(--cyan),var(--lime));
  box-shadow:0 22px 60px rgba(0,0,0,0.48),0 0 36px rgba(57,245,255,0.18);
}
.confetti-btn:active{transform:scale(0.97)}

.confetti{
  position:fixed;width:10px;height:10px;border-radius:3px;
  animation:fall linear forwards;pointer-events:none;z-index:999;
}
@keyframes fall{to{transform:translateY(100vh) rotate(720deg)}}

@media (prefers-reduced-motion: reduce){
  *{transition:none!important;animation:none!important;scroll-behavior:auto!important}
}
</style>
</head>

<body>
<header>
  <h1>Bailey‚Äôs Guide to Wellness</h1>
  <div class="subtitle" id="headerSubtitle">Her Era ‚Ä¢ 2026 Edition</div>
  <div class="header-line"></div>

  <div class="today-chip" aria-live="polite">
    <span class="dot"></span>
    <span id="todayLabel">Today</span>
  </div>

  <div class="cycle-sync-container">
    <button class="cycle-btn active" type="button" onclick="setCycle('follicular')">High Energy ‚ö°Ô∏è</button>
    <button class="cycle-btn" type="button" onclick="setCycle('luteal')">Low Energy ü©∏</button>
  </div>
</header>

<div class="container">

  <div id="cycle-message" class="dynamic-box" style="display:block;">
    <strong>üî• High Energy Phase:</strong> You‚Äôre in your power zone. Lift heavy + go get it.
  </div>

  <!-- TODAY MODE -->
  <div class="card" id="todayCard">
    <div style="text-align:center;">
      <div style="font-size:0.88rem;color:rgba(255,255,255,0.70);font-weight:900;letter-spacing:1.5px;">TODAY MODE</div>
      <div style="font-size:1.24rem;font-weight:1100;margin-top:6px;" id="todayFocus">Your focus today</div>
      <div style="font-size:0.86rem;color:rgba(255,255,255,0.65);margin-top:6px;">Tap to check it off ‚úÖ</div>
    </div>

    <div class="checklist" id="checklist"></div>

    <div class="check-meta">
      <span id="checkMetaText">0 / 4 done</span>
      <button class="small-link" type="button" onclick="resetToday()">Reset today</button>
    </div>
  </div>

  <!-- TRACKER -->
  <div class="card">
    <div style="text-align:center;">
      <div style="font-size:0.88rem;color:rgba(255,255,255,0.70);font-weight:900;letter-spacing:1.5px;">THE 26 LB COUNTDOWN</div>
      <div style="font-size:1.24rem;font-weight:1100;margin-top:6px;">Track Progress</div>
    </div>

    <div class="tracker-grid" id="trackerGrid"></div>

    <div class="tracker-footer">
      <div class="tracker-count" id="trackerCount">0 / 26 complete</div>
      <button class="reset-btn" type="button" onclick="resetProgress()">Reset</button>
    </div>

    <div style="text-align:center;font-size:0.78rem;color:rgba(255,255,255,0.55);margin-top:10px;">
      Tap a bubble when you lose a pound.
    </div>
  </div>

  <div class="section-label"><span>THE DAILY FLOW</span></div>
  <div class="card">
    <div class="schedule-item"><div class="time">06:50</div><div class="activity"><strong>Wake & Hydrate</strong><span>See stack below.</span></div></div>
    <div class="schedule-item"><div class="time">07:15</div><div class="activity"><strong>Daughter Drop-off</strong></div></div>
    <div class="schedule-item"><div class="time">08:30</div><div class="activity"><strong>Son Drop-off (M/W/F)</strong></div></div>
    <div class="schedule-item"><div class="time">12:30</div><div class="activity"><strong>High Protein Lunch</strong><span>Volume eating. Fill up on veggies + protein.</span></div></div>
    <div class="schedule-item"><div class="time">14:30</div><div class="activity"><strong>The Pickup</strong></div></div>
    <div class="schedule-item">
      <div class="time">15:15</div>
      <div class="activity">
        <strong>Workout Window (Primary)</strong>
        <span>3:15‚Äì3:45 ‚Ä¢ 30 minutes</span>
        <span class="tag move">üî• Lift</span>
      </div>
    </div>
    <div class="schedule-item">
      <div class="time">19:45</div>
      <div class="activity">
        <strong>Workout Window (Backup)</strong>
        <span>7:45‚Äì8:15 ‚Ä¢ after kids down</span>
        <span class="tag move">‚úÖ Backup</span>
      </div>
    </div>
    <div class="schedule-item">
      <div class="time">15:30</div>
      <div class="activity">
        <strong>Snack</strong>
        <span id="snack-text">Snack: Protein shake, jerky, turkey roll-ups.</span>
        <span class="tag food">‚ö° No Crash</span>
      </div>
    </div>
    <div class="schedule-item">
      <div class="time">21:00</div>
      <div class="activity">
        <strong>Wind-down</strong>
        <span id="workout-text">Stretch, mobility, or a cozy walk.</span>
        <span class="tag move">üåô Reset</span>
      </div>
    </div>
  </div>

  <div class="section-label"><span>THE MOVES</span></div>

  <!-- WORKOUTS -->
  <div class="workout-card" data-day="monday">
    <div class="workout-header">
      <div>
        <div class="workout-title">Monday: Leg Day <span class="today-badge" hidden>‚ú® Today</span></div>
        <div class="workout-meta">Warmup: 5 min walk</div>
      </div>
      <button class="collapse-btn" type="button" aria-expanded="true"><span class="chev">‚ñæ</span> Collapse</button>
    </div>
    <div class="workout-body">
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">1. Goblet Squats</span><span class="ex-reps">3 x 12</span></div>
        <div class="ex-details">
          <div class="detail-box"><span class="detail-label">Rest</span>60 sec</div>
          <div class="detail-box"><span class="detail-label">Weight</span>Medium</div>
        </div>
        <div class="cue-text">üí° Cue: Chest up. Drive through heels. Squeeze glutes at the top.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=goblet+squat+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">2. Reverse Lunges</span><span class="ex-reps">3 x 10/leg</span></div>
        <div class="ex-details">
          <div class="detail-box"><span class="detail-label">Rest</span>60 sec</div>
          <div class="detail-box"><span class="detail-label">Weight</span>Light/Med</div>
        </div>
        <div class="cue-text">üí° Cue: Step back far enough for 90¬∞ angles. Front knee behind toe.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=reverse+lunge+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
    </div>
  </div>

  <div class="workout-card" data-day="tuesday">
    <div class="workout-header">
      <div>
        <div class="workout-title">Tuesday: Pilates Core <span class="today-badge" hidden>‚ú® Today</span></div>
        <div class="workout-meta">Warmup: Cat/Cow stretch</div>
      </div>
      <button class="collapse-btn" type="button" aria-expanded="true"><span class="chev">‚ñæ</span> Collapse</button>
    </div>
    <div class="workout-body">
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">1. Bird-Dogs</span><span class="ex-reps">3 x 12</span></div>
        <div class="ex-details">
          <div class="detail-box"><span class="detail-label">Rest</span>30 sec</div>
          <div class="detail-box"><span class="detail-label">Tempo</span>Slow</div>
        </div>
        <div class="cue-text">üí° Cue: Imagine a glass of water on your back. Don‚Äôt spill it.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=bird+dog+exercise+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">2. Dead Bugs</span><span class="ex-reps">3 x 10</span></div>
        <div class="cue-text">üí° Cue: Lower back stays pressed down. If it arches, stop.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=dead+bug+exercise+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
    </div>
  </div>

  <div class="workout-card" data-day="wednesday">
    <div class="workout-header">
      <div>
        <div class="workout-title">Wednesday: Upper Body <span class="today-badge" hidden>‚ú® Today</span></div>
        <div class="workout-meta">Warmup: Arm circles</div>
      </div>
      <button class="collapse-btn" type="button" aria-expanded="true"><span class="chev">‚ñæ</span> Collapse</button>
    </div>
    <div class="workout-body">
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">1. DB Overhead Press</span><span class="ex-reps">3 x 10</span></div>
        <div class="ex-details">
          <div class="detail-box"><span class="detail-label">Rest</span>60 sec</div>
          <div class="detail-box"><span class="detail-label">Weight</span>Medium</div>
        </div>
        <div class="cue-text">üí° Cue: Core tight so you don‚Äôt arch. Press straight up.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=dumbbell+overhead+press+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">2. DB Rows</span><span class="ex-reps">3 x 12</span></div>
        <div class="cue-text">üí° Cue: Squeeze shoulder blade back like holding a pencil.</div>
        <div class="action-btns">
          <a href="https://www.youtube.com/results?search_query=dumbbell+row+form" target="_blank" class="btn-mini" rel="noreferrer">‚ñ∂ Video</a>
        </div>
      </div>
    </div>
  </div>

  <div class="workout-card" data-day="thursday">
    <div class="workout-header">
      <div>
        <div class="workout-title">Thursday: Full Body Burn <span class="today-badge" hidden>‚ú® Today</span></div>
        <div class="workout-meta">High intensity</div>
      </div>
      <button class="collapse-btn" type="button" aria-expanded="true"><span class="chev">‚ñæ</span> Collapse</button>
    </div>
    <div class="workout-body">
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">1. Bodyweight Squats</span><span class="ex-reps">3 x 15</span></div>
        <div class="cue-text">üí° Cue: Fast pace but controlled. Chest up.</div>
      </div>
      <div class="exercise-block">
        <div class="ex-header"><span class="ex-name">2. Mountain Climbers</span><span class="ex-reps">3 x 20</span></div>
        <div class="cue-text">üí° Cue: Drive knees to chest. Hips low.</div>
      </div>
    </div>
  </div>

  <!-- STACK -->
  <div class="section-label"><span>STACK</span></div>
  <div class="card">

    <!-- STACK GROUP: Morning -->
    <div class="stack-group" data-stack="morning">
      <button class="stack-head" type="button" aria-expanded="true">
        <div class="stack-left">
          <div class="stack-emoji">‚òÄÔ∏è</div>
          <div>
            <div class="stack-title">Morning (with breakfast)</div>
            <div class="stack-sub">Stability + foundations</div>
          </div>
        </div>
        <div class="stack-right">
          <label class="stack-toggle" title="Taken today">
            <input type="checkbox" class="stack-check" />
            <span class="toggle-pill">Taken</span>
          </label>
          <span class="stack-chev">‚ñæ</span>
        </div>
      </button>

      <div class="stack-body">
        <div class="stack-item">
          <h4>Buspirone (Rx) ‚Äî 5 mg</h4>
          <div class="stack-benefit">Anxiety management. Helps consistency & emotional regulation.</div>
          <div class="stack-notes">
            <span class="note">Take exactly as prescribed.</span>
          </div>
        </div>

        <div class="stack-item">
          <h4>Women‚Äôs Multivitamin</h4>
          <div class="stack-benefit">Covers micronutrient gaps during diet change.</div>
          <div class="stack-notes">
            <span class="note">Tip: take with food.</span>
          </div>
        </div>

        <div class="stack-item">
          <h4>Vitamin D3</h4>
          <div class="stack-benefit">Mood + immune support.</div>
          <div class="stack-notes">
            <span class="note">Best with a meal (fat helps).</span>
          </div>
        </div>

        <div class="stack-item">
          <h4>Fish Oil</h4>
          <div class="stack-benefit">Heart health, inflammation, BP support.</div>
          <div class="stack-notes">
            <span class="note">Mid-meal helps reduce burps.</span>
          </div>
        </div>

        <div class="pro-tip">How: swallow with water + food.</div>
      </div>
    </div>

    <!-- STACK GROUP: Any Time -->
    <div class="stack-group" data-stack="anytime">
      <button class="stack-head" type="button" aria-expanded="true">
        <div class="stack-left">
          <div class="stack-emoji">üß¨</div>
          <div>
            <div class="stack-title">Any Time</div>
            <div class="stack-sub">Skin + joints support</div>
          </div>
        </div>
        <div class="stack-right">
          <label class="stack-toggle" title="Taken today">
            <input type="checkbox" class="stack-check" />
            <span class="toggle-pill">Taken</span>
          </label>
          <span class="stack-chev">‚ñæ</span>
        </div>
      </button>

      <div class="stack-body">
        <div class="stack-item">
          <h4>Collagen</h4>
          <div class="stack-benefit">Joint, skin, connective tissue support ‚Äî especially helpful during weight loss.</div>
          <div class="pro-tip">How: mix into coffee, water, or smoothie.</div>
        </div>
      </div>
    </div>

    <!-- STACK GROUP: Post-Workout -->
    <div class="stack-group" data-stack="postworkout">
      <button class="stack-head" type="button" aria-expanded="true">
        <div class="stack-left">
          <div class="stack-emoji">üí™</div>
          <div>
            <div class="stack-title">Post-Workout</div>
            <div class="stack-sub">Recovery + tone</div>
          </div>
        </div>
        <div class="stack-right">
          <label class="stack-toggle" title="Taken today">
            <input type="checkbox" class="stack-check" />
            <span class="toggle-pill">Taken</span>
          </label>
          <span class="stack-chev">‚ñæ</span>
        </div>
      </button>

      <div class="stack-body">
        <div class="stack-item">
          <h4>Whey Isolate</h4>
          <div class="stack-benefit">Muscle repair + satiety. Helps prevent ‚Äúskinny-fat‚Äù weight loss.</div>
        </div>

        <div class="stack-item">
          <h4>Creatine (3‚Äì5 g)</h4>
          <div class="stack-benefit">Improves strength & muscle tone. Does NOT cause bulk or fat gain.</div>
          <div class="stack-notes">
            <span class="note">Consistency matters most.</span>
          </div>
        </div>

        <div class="pro-tip">How: shaker bottle ‚Äî mix together.</div>
      </div>
    </div>

    <!-- STACK GROUP: Night -->
    <div class="stack-group" data-stack="night">
      <button class="stack-head" type="button" aria-expanded="true">
        <div class="stack-left">
          <div class="stack-emoji">üåô</div>
          <div>
            <div class="stack-title">Night</div>
            <div class="stack-sub">Sleep + recovery + digestion</div>
          </div>
        </div>
        <div class="stack-right">
          <label class="stack-toggle" title="Taken today">
            <input type="checkbox" class="stack-check" />
            <span class="toggle-pill">Taken</span>
          </label>
          <span class="stack-chev">‚ñæ</span>
        </div>
      </button>

      <div class="stack-body">
        <div class="stack-item">
          <h4>Magnesium Glycinate</h4>
          <div class="stack-benefit">Relaxation, sleep quality, muscle recovery.</div>
          <div class="pro-tip">How: mix magnesium powder in water.</div>
        </div>

        <div class="stack-item">
          <h4>Probiotic</h4>
          <div class="stack-benefit">Digestive support during diet changes.</div>
          <div class="pro-tip">How: swallow probiotic capsule.</div>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="confetti-btn-container">
  <button class="confetti-btn" type="button" onclick="fireConfetti()">I CRUSHED IT! üéä</button>
</div>

<script>
/** =========================
 *  Storage keys
 *  ========================= */
const STORAGE = {
  progress: "glowUpProgress",
  phase: "glowUpPhase",
  collapsed: "glowUpCollapsedWorkouts",
  today: "glowUpDailyChecklist",
  stackTaken: "bgwStackTaken",
  stackCollapsed: "bgwStackCollapsed"
};

function safeParse(json, fallback) {
  try { return JSON.parse(json) ?? fallback; } catch { return fallback; }
}
function todayKey() {
  const d = new Date();
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth() + 1).padStart(2, "0");
  const dd = String(d.getDate()).padStart(2, "0");
  return `${yyyy}-${mm}-${dd}`;
}
function dayNameLower() {
  return new Date().toLocaleDateString(undefined, { weekday: "long" }).toLowerCase();
}

/** =========================
 *  PWA service worker
 *  ========================= */
if ("serviceWorker" in navigator) {
  window.addEventListener("load", async () => {
    try { await navigator.serviceWorker.register("./sw.js"); }
    catch (err) { console.warn("SW registration failed:", err); }
  });
}

/** =========================
 *  Tracker
 *  ========================= */
const grid = document.getElementById("trackerGrid");
const totalPounds = 26;
let progress = safeParse(localStorage.getItem(STORAGE.progress), []);

function renderCount() {
  document.getElementById("trackerCount").textContent = `${progress.length} / ${totalPounds} complete`;
}
function saveProgress() {
  localStorage.setItem(STORAGE.progress, JSON.stringify(progress));
  renderCount();
}
function resetProgress() {
  progress = [];
  localStorage.removeItem(STORAGE.progress);
  document.querySelectorAll(".lb-bubble").forEach(b => b.classList.remove("checked"));
  renderCount();
}
for (let i = 0; i < totalPounds; i++) {
  const bubble = document.createElement("div");
  bubble.className = "lb-bubble";
  bubble.textContent = i + 1;
  bubble.dataset.index = String(i);
  if (progress.includes(i)) bubble.classList.add("checked");

  bubble.addEventListener("click", () => {
    const idx = Number(bubble.dataset.index);
    const isChecked = bubble.classList.toggle("checked");
    if (isChecked) {
      if (!progress.includes(idx)) progress.push(idx);
      fireConfetti();
    } else {
      progress = progress.filter(p => p !== idx);
    }
    saveProgress();
  });
  grid.appendChild(bubble);
}
renderCount();

/** =========================
 *  Cycle Sync (persist)
 *  ========================= */
function setCycle(phase) {
  const btns = document.querySelectorAll(".cycle-btn");
  const msg = document.getElementById("cycle-message");
  const workoutText = document.getElementById("workout-text");

  btns.forEach(b => b.classList.remove("active"));
  localStorage.setItem(STORAGE.phase, phase);

  if (phase === "follicular") {
    btns[0].classList.add("active");
    msg.style.display = "block";
    msg.style.background = "rgba(57,245,255,0.08)";
    msg.style.borderColor = "rgba(57,245,255,0.22)";
    msg.innerHTML = "<strong>üî• High Energy Phase:</strong> You‚Äôre in your power zone. Lift heavy + go get it.";
    workoutText.textContent = "Stretch, mobility, or a cozy walk.";
  } else {
    btns[1].classList.add("active");
    msg.style.display = "block";
    msg.style.background = "rgba(255,59,212,0.08)";
    msg.style.borderColor = "rgba(255,59,212,0.22)";
    msg.innerHTML = "<strong>ü©∏ Low Energy Phase:</strong> Cozy + recover. Walk, stretch, lighter weights ‚Äî still a win.";
    workoutText.textContent = "Stretch, mobility, or a cozy walk.";
  }
}
setCycle(localStorage.getItem(STORAGE.phase) || "follicular");

/** =========================
 *  Collapsible workouts (persist)
 *  ========================= */
let collapsedMap = safeParse(localStorage.getItem(STORAGE.collapsed), {});
function workoutId(card, index) { return card.getAttribute("data-day") || `workout-${index}`; }
function saveCollapsed() { localStorage.setItem(STORAGE.collapsed, JSON.stringify(collapsedMap)); }

function setCollapsed(card, btn, body, collapsed) {
  card.classList.toggle("collapsed", collapsed);
  btn.setAttribute("aria-expanded", String(!collapsed));
  btn.innerHTML = collapsed ? `<span class="chev">‚ñæ</span> Expand` : `<span class="chev">‚ñæ</span> Collapse`;
  body.style.maxHeight = collapsed ? "0px" : body.scrollHeight + "px";
}
function initCollapsibles() {
  const cards = Array.from(document.querySelectorAll(".workout-card"));
  cards.forEach((card, i) => {
    const btn = card.querySelector(".collapse-btn");
    const body = card.querySelector(".workout-body");
    if (!btn || !body) return;

    const id = workoutId(card, i);
    const isCollapsed = Boolean(collapsedMap[id]);

    body.style.maxHeight = isCollapsed ? "0px" : body.scrollHeight + "px";
    setCollapsed(card, btn, body, isCollapsed);

    btn.addEventListener("click", () => {
      const next = !card.classList.contains("collapsed");
      collapsedMap[id] = next;
      saveCollapsed();
      setCollapsed(card, btn, body, next);
    });

    window.addEventListener("resize", () => {
      if (!card.classList.contains("collapsed")) body.style.maxHeight = body.scrollHeight + "px";
    });
  });
}
initCollapsibles();

/** =========================
 *  Today mode
 *  ========================= */
const today = dayNameLower();
document.getElementById("todayLabel").textContent =
  `${today.charAt(0).toUpperCase() + today.slice(1)} ‚Ä¢ ${todayKey()}`;

document.getElementById("headerSubtitle").textContent =
  `Her Era ‚Ä¢ ${today.charAt(0).toUpperCase() + today.slice(1)} Edition`;

const workoutLabelByDay = {
  monday: "Leg Day",
  tuesday: "Pilates Core",
  wednesday: "Upper Body",
  thursday: "Full Body Burn",
  friday: "Recovery",
  saturday: "Recovery",
  sunday: "Recovery"
};
document.getElementById("todayFocus").textContent =
  `Focus: ${workoutLabelByDay[today] || "Recovery"}`;

function highlightTodayWorkout() {
  document.querySelectorAll(".workout-card").forEach(card => {
    card.classList.remove("today");
    const badge = card.querySelector(".today-badge");
    if (badge) badge.hidden = true;
  });

  const todayCard = document.querySelector(`.workout-card[data-day="${today}"]`);
  if (!todayCard) return;

  todayCard.classList.add("today");
  const badge = todayCard.querySelector(".today-badge");
  if (badge) badge.hidden = false;

  const btn = todayCard.querySelector(".collapse-btn");
  const body = todayCard.querySelector(".workout-body");
  if (btn && body) {
    const id = workoutId(todayCard, Array.from(document.querySelectorAll(".workout-card")).indexOf(todayCard));
    collapsedMap[id] = false;
    saveCollapsed();
    setCollapsed(todayCard, btn, body, false);
    body.style.maxHeight = body.scrollHeight + "px";
  }

  setTimeout(() => todayCard.scrollIntoView({ behavior: "smooth", block: "start" }), 220);
}
highlightTodayWorkout();

/** =========================
 *  Checklist per day (persisted)
 *  ========================= */
const checklistEl = document.getElementById("checklist");
const checkMetaText = document.getElementById("checkMetaText");

const defaultChecklist = [
  { id: "water", title: "Hydrate", sub: "Water + morning essentials" },
  { id: "protein", title: "Protein", sub: "High-protein lunch + snack" },
  { id: "move", title: "Movement", sub: "Today‚Äôs workout window or walk" },
  { id: "sleep", title: "Recovery", sub: "Magnesium + wind-down" }
];

function loadDailyState() {
  const all = safeParse(localStorage.getItem(STORAGE.today), {});
  const key = todayKey();
  return { all, key, state: all[key] || { done: {} } };
}
function saveDailyState(all) { localStorage.setItem(STORAGE.today, JSON.stringify(all)); }

function renderChecklist() {
  const { all, key, state } = loadDailyState();
  checklistEl.innerHTML = "";
  let doneCount = 0;

  defaultChecklist.forEach(item => {
    const isDone = Boolean(state.done[item.id]);
    if (isDone) doneCount++;

    const row = document.createElement("div");
    row.className = "check-item" + (isDone ? " done" : "");
    row.setAttribute("role", "button");
    row.setAttribute("tabindex", "0");

    row.innerHTML = `
      <div class="box">${isDone ? "‚úì" : ""}</div>
      <div class="txt">
        <div class="title">${item.title}</div>
        <div class="sub">${item.sub}</div>
      </div>
    `;

    const toggle = () => {
      state.done[item.id] = !Boolean(state.done[item.id]);
      all[key] = state;
      saveDailyState(all);
      renderChecklist();
      if (state.done[item.id]) fireConfetti();
    };

    row.addEventListener("click", toggle);
    row.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggle(); }
    });

    checklistEl.appendChild(row);
  });

  checkMetaText.textContent = `${doneCount} / ${defaultChecklist.length} done`;
}

function resetToday() {
  const { all, key } = loadDailyState();
  delete all[key];
  saveDailyState(all);
  renderChecklist();
}
renderChecklist();

/** =========================
 *  STACK: daily "Taken" + collapsible (starts OPEN)
 *  Confetti rules unchanged: NO fireConfetti() here.
 *  ========================= */
function loadStackTaken() {
  const all = safeParse(localStorage.getItem(STORAGE.stackTaken), {});
  const key = todayKey();
  return { all, key, taken: all[key] || {} };
}
function saveStackTaken(all) {
  localStorage.setItem(STORAGE.stackTaken, JSON.stringify(all));
}
function loadStackCollapsed() {
  return safeParse(localStorage.getItem(STORAGE.stackCollapsed), {});
}
function saveStackCollapsed(map) {
  localStorage.setItem(STORAGE.stackCollapsed, JSON.stringify(map));
}

function initStack() {
  const groups = Array.from(document.querySelectorAll(".stack-group"));
  if (!groups.length) return;

  const { all, key, taken } = loadStackTaken();
  const collapsedMap = loadStackCollapsed();

  groups.forEach(group => {
    const id = group.getAttribute("data-stack") || "stack";
    const head = group.querySelector(".stack-head");
    const body = group.querySelector(".stack-body");
    const check = group.querySelector(".stack-check");

    if (check) {
      check.checked = Boolean(taken[id]);
      check.addEventListener("change", () => {
        const latest = loadStackTaken();
        latest.taken[id] = check.checked;
        latest.all[latest.key] = latest.taken;
        saveStackTaken(latest.all);
      });
    }

    const isCollapsed = Boolean(collapsedMap[id]);
    group.classList.toggle("collapsed", isCollapsed);
    if (head) head.setAttribute("aria-expanded", String(!isCollapsed));
    if (body) body.style.maxHeight = isCollapsed ? "0px" : body.scrollHeight + "px";

    if (head && body) {
      head.addEventListener("click", (e) => {
        if (e.target && e.target.closest(".stack-toggle")) return;

        const nextCollapsed = !group.classList.contains("collapsed");
        group.classList.toggle("collapsed", nextCollapsed);
        head.setAttribute("aria-expanded", String(!nextCollapsed));

        collapsedMap[id] = nextCollapsed;
        saveStackCollapsed(collapsedMap);

        body.style.maxHeight = nextCollapsed ? "0px" : body.scrollHeight + "px";
      });

      window.addEventListener("resize", () => {
        if (!group.classList.contains("collapsed")) body.style.maxHeight = body.scrollHeight + "px";
      });
    }
  });
}
initStack();

/** =========================
 *  Confetti (UNCHANGED RULES)
 *  ========================= */
function fireConfetti() {
  const colors = ["#ff3bd4", "#39f5ff", "#a6ff4d", "#8a5cff", "#ff9f2e"];
  for (let i = 0; i < 56; i++) {
    const conf = document.createElement("div");
    conf.classList.add("confetti");
    conf.style.left = Math.random() * 100 + "vw";
    conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    conf.style.animationDuration = (Math.random() * 2 + 1.8) + "s";
    conf.style.opacity = String(Math.random() * 0.6 + 0.4);
    document.body.appendChild(conf);
    setTimeout(() => conf.remove(), 4200);
  }
}
</script>
</body>
  </html>
